{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/MikaS%C3%A4rkioja/Documents/Ty%C3%B6kansio/Cursor/SaunaReservation/src/app/actions/delete-booking.ts"],"sourcesContent":["'use server';\r\n\r\nimport prisma from '@/lib/prisma';\r\nimport { revalidatePath } from 'next/cache';\r\n\r\n/**\r\n * Server Action to delete a booking by ID.\r\n * \r\n * @param bookingId The ID of the booking to delete\r\n */\r\nexport async function deleteBooking(bookingId: string) {\r\n  try {\r\n    if (!bookingId) {\r\n      throw new Error('Booking ID is required');\r\n    }\r\n\r\n    await prisma.booking.delete({\r\n      where: {\r\n        id: bookingId,\r\n      },\r\n    });\r\n\r\n    // Revalidate the admin dashboard so the row disappears immediately\r\n    revalidatePath('/admin');\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error('Failed to delete booking:', error);\r\n    return { success: false, error: 'Failed to delete booking' };\r\n  }\r\n}\r\n\r\n\r\n"],"names":[],"mappings":";;;;;;;IAUsB,gBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/MikaS%C3%A4rkioja/Documents/Ty%C3%B6kansio/Cursor/SaunaReservation/src/components/admin/DeleteBookingButton.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { Trash2, Loader2 } from 'lucide-react';\r\nimport { deleteBooking } from '@/app/actions/delete-booking';\r\n\r\ninterface DeleteBookingButtonProps {\r\n  id: string;\r\n}\r\n\r\nexport default function DeleteBookingButton({ id }: DeleteBookingButtonProps) {\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n\r\n  const handleDelete = async () => {\r\n    const confirmed = window.confirm(\"Are you sure you want to cancel this booking?\");\r\n    if (!confirmed) return;\r\n\r\n    setIsDeleting(true);\r\n    try {\r\n      const result = await deleteBooking(id);\r\n      if (!result.success) {\r\n        alert(result.error || 'Failed to delete');\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert('An unexpected error occurred');\r\n    } finally {\r\n      setIsDeleting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <button\r\n      onClick={handleDelete}\r\n      disabled={isDeleting}\r\n      className=\"p-1 rounded hover:bg-red-50 text-stone-400 hover:text-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n      title=\"Cancel Booking\"\r\n    >\r\n      {isDeleting ? (\r\n        <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n      ) : (\r\n        <Trash2 className=\"w-4 h-4\" />\r\n      )}\r\n    </button>\r\n  );\r\n}\r\n\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AAJA;;;;;AAUe,SAAS,oBAAoB,EAAE,EAAE,EAA4B;IAC1E,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAE7C,MAAM,eAAe;QACnB,MAAM,YAAY,OAAO,OAAO,CAAC;QACjC,IAAI,CAAC,WAAW;QAEhB,cAAc;QACd,IAAI;YACF,MAAM,SAAS,MAAM,IAAA,8KAAa,EAAC;YACnC,IAAI,CAAC,OAAO,OAAO,EAAE;gBACnB,MAAM,OAAO,KAAK,IAAI;YACxB;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC;YACd,MAAM;QACR,SAAU;YACR,cAAc;QAChB;IACF;IAEA,qBACE,8OAAC;QACC,SAAS;QACT,UAAU;QACV,WAAU;QACV,OAAM;kBAEL,2BACC,8OAAC,4NAAO;YAAC,WAAU;;;;;iCAEnB,8OAAC,oNAAM;YAAC,WAAU;;;;;;;;;;;AAI1B"}}]
}