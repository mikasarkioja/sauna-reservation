{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/MikaS%C3%A4rkioja/Documents/Ty%C3%B6kansio/Cursor/SaunaReservation/src/components/admin/DeleteBookingButton.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/admin/DeleteBookingButton.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/admin/DeleteBookingButton.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAgT,GAC7U,8EACA","ignoreList":[0]}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/MikaS%C3%A4rkioja/Documents/Ty%C3%B6kansio/Cursor/SaunaReservation/src/components/admin/DeleteBookingButton.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/admin/DeleteBookingButton.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/admin/DeleteBookingButton.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA4R,GACzT,0DACA","ignoreList":[0]}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/MikaS%C3%A4rkioja/Documents/Ty%C3%B6kansio/Cursor/SaunaReservation/src/app/admin/page.tsx"],"sourcesContent":["import Link from 'next/link';\nimport { format, isAfter } from 'date-fns';\nimport { RefreshCw, TrendingUp, Users, Calendar } from 'lucide-react';\nimport prisma from '@/lib/prisma';\nimport { BookingStatus } from '@prisma/client';\nimport DeleteBookingButton from '@/components/admin/DeleteBookingButton';\n\nexport const dynamic = 'force-dynamic'; // Ensure we always fetch fresh data\n\nexport default async function AdminPage() {\n  // 1. Fetch Data\n  const bookings = await prisma.booking.findMany({\n    orderBy: { startTime: 'desc' }, // Newest first\n  });\n\n  // 2. Calculate Stats\n  const paidBookings = bookings.filter((b) => b.status === BookingStatus.PAID);\n  \n  const totalRevenueCents = paidBookings.reduce((sum, b) => sum + b.totalPrice, 0);\n  const totalRevenue = totalRevenueCents / 100;\n  \n  const totalBookingsCount = paidBookings.length;\n  \n  const now = new Date();\n  const futureBookings = paidBookings\n    .filter((b) => isAfter(b.startTime, now))\n    .sort((a, b) => a.startTime.getTime() - b.startTime.getTime());\n    \n  const nextSession = futureBookings[0] ? format(futureBookings[0].startTime, 'MMM d, HH:mm') : 'None';\n\n  return (\n    <main className=\"min-h-screen bg-stone-50 p-6 md:p-10 text-stone-800\">\n      <div className=\"max-w-6xl mx-auto space-y-8\">\n        \n        {/* Header */}\n        <div className=\"flex items-center justify-between\">\n          <h1 className=\"text-2xl font-bold tracking-tight text-stone-900 font-serif\">Sauna Admin</h1>\n          <Link \n            href=\"/admin\" \n            className=\"flex items-center gap-2 px-4 py-2 bg-white border border-stone-200 rounded-md text-sm font-medium text-stone-600 hover:bg-stone-100 hover:text-stone-900 transition-colors shadow-sm\"\n          >\n            <RefreshCw className=\"w-4 h-4\" />\n            Refresh\n          </Link>\n        </div>\n\n        {/* Stats Grid */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n          <StatCard \n            title=\"Total Revenue\" \n            value={`${totalRevenue.toFixed(2)}€`} \n            icon={<TrendingUp className=\"w-5 h-5 text-emerald-600\" />}\n          />\n          <StatCard \n            title=\"Confirmed Bookings\" \n            value={totalBookingsCount.toString()} \n            icon={<Users className=\"w-5 h-5 text-blue-600\" />}\n          />\n          <StatCard \n            title=\"Next Session\" \n            value={nextSession} \n            icon={<Calendar className=\"w-5 h-5 text-amber-600\" />}\n          />\n        </div>\n\n        {/* Bookings Table */}\n        <div className=\"bg-white rounded-xl shadow-sm border border-stone-200 overflow-hidden\">\n          <div className=\"p-6 border-b border-stone-100\">\n            <h2 className=\"text-lg font-semibold text-stone-900\">All Bookings</h2>\n            <p className=\"text-sm text-stone-500\">A list of all reservations including pending and cancelled.</p>\n          </div>\n          \n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full text-left text-sm\">\n              <thead className=\"bg-stone-50 text-stone-500 uppercase tracking-wider text-xs font-medium\">\n                <tr>\n                  <th className=\"px-6 py-4\">Date</th>\n                  <th className=\"px-6 py-4\">Time</th>\n                  <th className=\"px-6 py-4\">Customer</th>\n                  <th className=\"px-6 py-4\">Price</th>\n                  <th className=\"px-6 py-4\">Status</th>\n                  <th className=\"px-6 py-4 text-right\">Actions</th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-stone-100\">\n                {bookings.length === 0 ? (\n                  <tr>\n                    <td colSpan={5} className=\"px-6 py-12 text-center text-stone-400\">\n                      No bookings found.\n                    </td>\n                  </tr>\n                ) : (\n                  bookings.map((booking) => (\n                    <tr key={booking.id} className=\"hover:bg-stone-50 transition-colors\">\n                      <td className=\"px-6 py-4 font-medium text-stone-900\">\n                        {format(booking.startTime, 'MMM d, yyyy')}\n                      </td>\n                      <td className=\"px-6 py-4 text-stone-600\">\n                        {format(booking.startTime, 'HH:mm')} - {format(booking.endTime, 'HH:mm')}\n                      </td>\n                      <td className=\"px-6 py-4 text-stone-600\">\n                        <div className=\"flex flex-col\">\n                          <span>{booking.userEmail}</span>\n                          {booking.userName && <span className=\"text-xs text-stone-400\">{booking.userName}</span>}\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4 font-medium text-stone-900\">\n                        {(booking.totalPrice / 100).toFixed(2)}€\n                      </td>\n                      <td className=\"px-6 py-4\">\n                        <StatusBadge status={booking.status} />\n                      </td>\n                      <td className=\"px-6 py-4 text-right\">\n                        <DeleteBookingButton id={booking.id} />\n                      </td>\n                    </tr>\n                  ))\n                )}\n              </tbody>\n            </table>\n          </div>\n        </div>\n\n      </div>\n    </main>\n  );\n}\n\n// --- Components ---\n\nfunction StatCard({ title, value, icon }: { title: string, value: string, icon: React.ReactNode }) {\n  return (\n    <div className=\"bg-white p-6 rounded-xl border border-stone-200 shadow-sm flex items-start justify-between\">\n      <div>\n        <p className=\"text-sm font-medium text-stone-500 mb-1\">{title}</p>\n        <p className=\"text-2xl font-bold text-stone-900\">{value}</p>\n      </div>\n      <div className=\"p-2 bg-stone-50 rounded-lg border border-stone-100\">\n        {icon}\n      </div>\n    </div>\n  );\n}\n\nfunction StatusBadge({ status }: { status: BookingStatus }) {\n  let styles = '';\n  \n  switch (status) {\n    case BookingStatus.PAID:\n      styles = 'bg-emerald-100 text-emerald-800 border-emerald-200';\n      break;\n    case BookingStatus.PENDING:\n      styles = 'bg-amber-100 text-amber-800 border-amber-200';\n      break;\n    case BookingStatus.FAILED:\n    case BookingStatus.CANCELLED:\n      styles = 'bg-red-100 text-red-800 border-red-200';\n      break;\n    default:\n      styles = 'bg-gray-100 text-gray-800 border-gray-200';\n  }\n\n  return (\n    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${styles}`}>\n      {status}\n    </span>\n  );\n}\n\n"],"names":[],"mappings":"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"}}]
}